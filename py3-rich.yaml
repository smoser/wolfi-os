environment:
  contents:
    packages:
      - busybox
      - ca-certificates-bundle
      - py3-gpep517
      - py3-pip
      - py3-setuptools
      - python3
      - wolfi-base

package:
  copyright:
    - license: LGPL-2.1-or-later
  dependencies:
    runtime:
      - py3-markdown-it-py
      - py3-pygments
      - python3
  description: Rich is a Python library for rich text and beautiful formatting in the terminal.
  epoch: 0
  name: py3-rich
  version: 13.7.1

pipeline:
  - uses: git-checkout
    with:
      expected-commit: 7f580bdcf07a3b269a0e786b6a3aa9c804f393cf
      repository: https://github.com/Textualize/rich
      tag: v${{package.version}}

  - runs: "export SETUPTOOLS_SCM_PRETEND_VERSION=${{package.version}}\npython3 -m pip install -U poetry\npython3 -m gpep517 build-wheel \\\n  --wheel-dir dist \\\n  --output-fd 3 3>&1 >&2\npython3 -m installer -d \"${{targets.destdir}}\" \\\n  dist/*.whl\ninstall -Dm644 LICENSE \\\n  \"${{targets.destdir}}\"/usr/share/licenses/${{package.name}}/LICENSE\n"

  - uses: strip

test:
  environment:
    contents:
      packages:
        - py3-pip
    environment:
      RICH_TEST_STRING: This is a test string for Rich!
  pipeline:
    - name: Test Rich Installation
      runs: 'python3 -m pip install rich

        python3 -c "from rich import print; print(''${RICH_TEST_STRING}'')"

      '
    - name: Test Rich Formatting Capabilities
      runs: 'python3 -c "from rich.console import Console; console = Console(); console.print(''${RICH_TEST_STRING}'', style=''bold red'')"

      '
    - name: Test Rich JSON Rendering
      runs: 'python3 -c "from rich import print; print({''json'': [''Renders'', ''well'', ''in'', ''Rich'']})"

      '
    - uses: py/pip-check

update:
  enabled: true
  github:
    identifier: Textualize/rich
    strip-prefix: v
